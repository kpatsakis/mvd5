void avcodec_string(char *buf, int buf_size, AVCodecContext *enc, int encode) const char * codec_name ; if ( ! buf || buf_size <= 0 )  codec_name = avcodec_get_name ( enc -> codec_id ); const char *avcodec_get_name(enum AVCodecID id) const AVCodecDescriptor * cd ; AVCodec * codec ; if ( id == AV_CODEC_ID_NONE )  return "none" ; cd = avcodec_descriptor_get ( id ); if ( cd )  return cd -> name ; codec = avcodec_find_decoder ( id ); AVCodec *avcodec_find_decoder(enum AVCodecID id) return find_encdec ( id , 0 ) ; static AVCodec *find_encdec(enum AVCodecID id, int encoder) AVCodec * p , * experimental = NULL ; p = first_avcodec; id = remap_deprecated_codec_id ( id ); static enum AVCodecID remap_deprecated_codec_id(enum AVCodecID id) switch ( id )  return AV_CODEC_ID_BRENDER_PIX ; return AV_CODEC_ID_OPUS ; return AV_CODEC_ID_TAK ; return AV_CODEC_ID_PAF_AUDIO ; return AV_CODEC_ID_PCM_S16BE_PLANAR ; return AV_CODEC_ID_PCM_S24LE_PLANAR ; return AV_CODEC_ID_PCM_S32LE_PLANAR ; return AV_CODEC_ID_ADPCM_VIMA ; return AV_CODEC_ID_ESCAPE130 ; return AV_CODEC_ID_EXR ; return AV_CODEC_ID_G2M ; return AV_CODEC_ID_PAF_VIDEO ; return AV_CODEC_ID_WEBP ; return AV_CODEC_ID_HEVC ; return AV_CODEC_ID_MVC1 ; return AV_CODEC_ID_MVC2 ; return AV_CODEC_ID_SANM ; return AV_CODEC_ID_SGIRLE ; return AV_CODEC_ID_VP7 ; return id ; while ( p )  if ( ( encoder ? av_codec_is_encoder ( p ) : av_codec_is_decoder ( p ) ) && p -> id == id )  int av_codec_is_decoder(const AVCodec *codec) return codec && codec -> decode ; int av_codec_is_encoder(const AVCodec *codec) return codec && ( codec -> encode_sub || codec -> encode2 ) ; if ( p -> capabilities & AV_CODEC_CAP_EXPERIMENTAL && ! experimental )  experimental = p; return p ; p = p -> next; return experimental ; if ( codec )  return codec -> name ; codec = avcodec_find_encoder ( id ); AVCodec *avcodec_find_encoder(enum AVCodecID id) return find_encdec ( id , 1 ) ; static AVCodec *find_encdec(enum AVCodecID id, int encoder) AVCodec * p , * experimental = NULL ; p = first_avcodec; id = remap_deprecated_codec_id ( id ); while ( p )  if ( ( encoder ? av_codec_is_encoder ( p ) : av_codec_is_decoder ( p ) ) && p -> id == id )  if ( p -> capabilities & AV_CODEC_CAP_EXPERIMENTAL && ! experimental )  experimental = p; return p ; p = p -> next; return experimental ; if ( codec )  return codec -> name ; return "unknown_codec" ; if ( enc -> codec && strcmp ( enc -> codec -> name , codec_name ) )  
static int megasas_dcmd_ld_get_info(MegasasState *s, MegasasCmd *cmd) size_t dcmd_size = sizeof ( info ) ; uint16_t ld_id ; uint32_t max_ld_disks = s -> fw_luns ; SCSIDevice * sdev = NULL ; if ( cmd -> iov_size < dcmd_size )  ld_id = le16_to_cpu ( cmd -> frame -> dcmd . mbox [ 0 ] ); if ( megasas_is_jbod ( s ) )  static bool megasas_is_jbod(MegasasState *s) return s -> flags & MEGASAS_MASK_USE_JBOD ; if ( ld_id < max_ld_disks )  sdev = scsi_device_find ( & s -> bus , 0 , ld_id , 0 ); if ( sdev )  retval = megasas_ld_get_info_submit ( sdev , ld_id , cmd ); static int megasas_ld_get_info_submit(SCSIDevice *sdev, int MegasasCmd *cmd) struct mfi_ld_info * info = cmd -> iov_buf ; uint64_t ld_size ; if ( ! cmd -> iov_buf )  info -> ld_config . params . state = MFI_LD_STATE_OPTIMAL; info -> ld_config . properties . ld . v . target_id = lun; info -> ld_config . params . stripe_size = 3; info -> ld_config . params . num_drives = 1; info -> ld_config . params . is_consistent = 1; info -> size = cpu_to_le64 ( ld_size ); memset ( info -> ld_config . span , 0 , sizeof ( info -> ld_config . span ) ); info -> ld_config . span [ 0 ] . start_block = 0; info -> ld_config . span [ 0 ] . num_blocks = info -> size; info -> ld_config . span [ 0 ] . array_ref = cpu_to_le16 ( sdev_id ); 
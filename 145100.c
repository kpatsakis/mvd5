static char *handle_skinny_show_devices(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a) switch ( cmd )  return _skinny_show_devices ( a -> fd , NULL , NULL , NULL , a -> argc , ( const char * * ) a -> argv ) ; static char *_skinny_show_devices(int fd, int *total, struct mansession *s, const struct message *m, int argc, const char *argv[]) const char * id ; char idtext [ 256 ] = "" ; if ( s )  id = astman_get_header ( m , "ActionID" ); if ( ! ast_strlen_zero ( id ) )  snprintf ( idtext , sizeof ( idtext ) , "ActionID: %s\r\n" , id ); astman_append ( s "Event: "Channeltype: "ObjectName: "ChannelObjectType: "DeviceId: "IPaddress: "Type: "Devicestatus: "NumberOfLines: %d\r\n" idtext d -> name d -> id d -> session ? ast_inet_ntoa ( d -> session -> sin . sin_addr ) : "-none-" device2str ( d -> type ) d -> registered ? "registered" : "unregistered" numlines ) static char *device2str(int type) switch ( type )  snprintf ( tmp , DEVICE2STR_BUFSIZE , "UNKNOWN-%d" , type ); return tmp ; 
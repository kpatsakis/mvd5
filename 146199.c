static ssize_t nic_receive(NetClientState *nc, const uint8_t * buf, size_t size) EEPRO100State * s = qemu_get_nic_opaque ( nc ) ; uint8_t min_buf [ 60 ] ; static const uint8_t broadcast_macaddr [ 6 ] = { 0xff , 0xff , 0xff , 0xff , 0xff , 0xff } ; if ( size < sizeof ( min_buf ) )  memcpy ( min_buf , buf , size ); buf = min_buf; size = sizeof ( min_buf ); if ( s -> configuration [ 8 ] & 0x80 )  if ( size < 64 && ( s -> configuration [ 7 ] & BIT ( 0 ) ) )  if ( ( size > MAX_ETH_FRAME_SIZE + 4 ) && ! ( s -> configuration [ 18 ] & BIT ( 3 ) ) )  if ( memcmp ( buf , s -> conf . macaddr . a , 6 ) == 0 )  if ( memcmp ( buf , broadcast_macaddr , 6 ) == 0 )  if ( buf [ 0 ] & 0x01 )  if ( s -> configuration [ 15 ] & BIT ( 0 ) )  if ( s -> configuration [ 20 ] & BIT ( 6 ) )  TRACE ( RXTX , logout ( "%p received frame, ignored, len=%zu,%s\n" , s , size , nic_dump ( buf , size ) ) ); static const char *nic_dump(const uint8_t * buf, unsigned size) static char dump [ 3 * 16 + 1 ] ; char * p = & dump [ 0 ] ; if ( size > 16 )  size = 16; while ( size -- > 0 )  p += sprintf ( p , " %02x" , * buf ++ ); 
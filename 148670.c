static int manager_skinny_show_devices(struct mansession *s, const struct message *m) const char * a [ ] = { "skinny" , "show" , "devices" } ; _skinny_show_devices ( - 1 , & total , s , m , 3 , a ); static char *_skinny_show_devices(int fd, int *total, struct mansession *s, const struct message *m, int argc, const char *argv[]) struct skinny_device * d ; switch ( argc )  int numlines = 0 ; numlines ++; if ( ! s )  ast_cli ( fd , "%-20s %-16s %-15s %-15s %c %2d\n" , d -> name , d -> id , d -> session ? ast_inet_ntoa ( d -> session -> sin . sin_addr ) : "" , device2str ( d -> type ) , d -> registered ? 'Y' : 'N' , numlines ); static char *device2str(int type) char * tmp ; switch ( type )  if ( ! ( tmp = ast_threadstorage_get ( & device2str_threadbuf , DEVICE2STR_BUFSIZE ) ) )  snprintf ( tmp , DEVICE2STR_BUFSIZE , "UNKNOWN-%d" , type ); return tmp ; 
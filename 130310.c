static int megasas_dcmd_ld_list_query(MegasasState *s, MegasasCmd *cmd) struct mfi_ld_targetid_list info ; size_t dcmd_size = sizeof ( info ) , resid ; memset ( & info , 0 , dcmd_size ); info . targetid [ num_ld_disks ] = sdev -> lun; num_ld_disks ++; info . ld_count = cpu_to_le32 ( num_ld_disks ); info . size = dcmd_size; trace_megasas_dcmd_ld_get_list ( cmd -> index , num_ld_disks , max_ld_disks ); resid = dma_buf_read ( ( uint8_t * ) & info , dcmd_size , & cmd -> qsg ); cmd -> iov_size = dcmd_size - resid; 
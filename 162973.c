void avcodec_string(char *buf, int buf_size, AVCodecContext *enc, int encode) if ( ! buf || buf_size <= 0 )  switch ( enc -> codec_type )  char detail [ 256 ] = "(" ; if ( strlen ( detail ) > 1 )  detail [ strlen ( detail ) - 2 ] = 0; av_strlcatf ( buf , buf_size , "%s)" , detail ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , "%dx%d" , enc -> width , enc -> height ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , " (%dx%d)" , enc -> coded_width , enc -> coded_height ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , " [SAR %d:%d DAR %d:%d]" , enc -> sample_aspect_ratio . num , enc -> sample_aspect_ratio . den , display_aspect_ratio . num , display_aspect_ratio . den ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", %d/%d" , enc -> time_base . num / g , enc -> time_base . den / g ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", q=%d-%d" , enc -> qmin , enc -> qmax ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", Closed Captions" ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", lossless" ); av_strlcat ( buf , separator , buf_size ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , "%d Hz, " , enc -> sample_rate ); av_get_channel_layout_string ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , enc -> channels , enc -> channel_layout ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", %s" , av_get_sample_fmt_name ( enc -> sample_fmt ) ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , " (%d bit)" , enc -> bits_per_raw_sample ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", %d/%d" , enc -> time_base . num / g , enc -> time_base . den / g ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", %dx%d" , enc -> width , enc -> height ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", pass 1" ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", pass 2" ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", %d kb/s" , bitrate / 1000 ); snprintf ( buf + strlen ( buf ) , buf_size - strlen ( buf ) , ", max. %d kb/s" , enc -> rc_max_rate / 1000 ); 
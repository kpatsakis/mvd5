 Http2Stream::GenerateOpen() mStreamID = mSession -> RegisterStreamID ( this ); const nsHttpRequestHead * head = mTransaction -> RequestHead ( ) ; if ( mStreamID >= 0x80000000 )  nsCString compressedData ; if ( head -> IsConnect ( ) )  nsHttpConnectionInfo * ci = mTransaction -> ConnectionInfo ( ) ; if ( ! ci )  uint32_t dataLength = compressedData . Length ( ) ; uint32_t maxFrameData = Http2Session :: kMaxFrameData - 5 ; uint32_t numFrames = 1 ; if ( dataLength > maxFrameData )  numFrames += ( ( dataLength - maxFrameData ) + Http2Session :: kMaxFrameData - 1 ) / Http2Session :: kMaxFrameData; uint32_t outputOffset = 0 ; for (uint32_t idx = 0; idx < numFrames; ++idx) uint32_t flags , frameLen ; bool lastFrame = ( idx == numFrames - 1 ) ; frameLen = maxFrameData; if ( ! idx )  maxFrameData = Http2Session :: kMaxFrameData; if ( lastFrame )  frameLen = dataLength; dataLength -= frameLen; outputOffset += Http2Session :: kFrameHeaderBytes; if ( ! idx )  memcpy ( mTxInlineFrame . get ( ) + outputOffset , & wireDep , 4 ); memcpy ( mTxInlineFrame . get ( ) + outputOffset + 4 , & mPriorityWeight , 1 ); outputOffset += 5; memcpy ( mTxInlineFrame . get ( ) + outputOffset , compressedData . BeginReading ( ) + compressedDataOffset , frameLen ); outputOffset += frameLen; 
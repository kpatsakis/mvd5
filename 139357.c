MemoryRegionSection address_space_translate_for_iotlb(AddressSpace *as, hwaddr addr, hwaddr hwaddr *plen) MemoryRegionSection * section ; section = address_space_translate_internal ( as -> dispatch , addr , xlat , plen , false ); static MemoryRegionSection address_space_translate_internal(AddressSpaceDispatch *d, hwaddr addr, hwaddr hwaddr *plen, bool resolve_subpage) MemoryRegionSection * section ; section = address_space_lookup_region ( d , addr , resolve_subpage ); static MemoryRegionSection *address_space_lookup_region(AddressSpaceDispatch hwaddr bool resolve_subpage) MemoryRegionSection * section ; subpage_t * subpage ; section = phys_page_find ( d -> phys_map , addr >> TARGET_PAGE_BITS , d -> nodes , d -> sections ); static MemoryRegionSection *phys_page_find(PhysPageEntry lp, hwaddr Node *nodes, MemoryRegionSection *sections) PhysPageEntry * p ; int i ; for (i = P_L2_LEVELS - 1; i >= 0 && !lp.is_leaf; i--) if ( lp . ptr == PHYS_MAP_NODE_NIL )  return & sections [ PHYS_SECTION_UNASSIGNED ] ; p = nodes [ lp . ptr ]; lp = p [ ( index >> ( i * L2_BITS ) ) & ( L2_SIZE - 1 ) ]; return & sections [ lp . ptr ] ; if ( resolve_subpage && section -> mr -> subpage )  subpage = container_of ( section -> mr , subpage_t , iomem ); section = & d -> sections [ subpage -> sub_section [ SUBPAGE_IDX ( addr ) ] ]; return section ; return section ; assert ( ! section -> mr -> iommu_ops ); 
static CharDriverState *qemu_chr_open_udp(const char *def) fd = socket ( PF_INET , SOCK_DGRAM , 0 ); if ( fd < 0 )  if ( bind ( fd , ( struct sockaddr * ) & saddr , sizeof ( saddr ) ) < 0 )  s -> fd = fd; s -> bufcnt = 0; s -> bufptr = 0; chr -> opaque = s; chr -> chr_write = udp_chr_write; chr -> chr_update_read_handler = udp_chr_update_read_handler; chr -> chr_close = udp_chr_close; if ( fd >= 0 )  closesocket ( fd ); 
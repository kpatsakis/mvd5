size_t uint8_t* size_t RTPFragmentationHeader* fragmentation) fragmentation -> fragmentationVectorSize = 0; memset ( fragmentation -> fragmentationLength , 0 , kMaxVP8Partitions * sizeof ( size_t ) ); if ( packets_ . empty ( ) )  PacketIterator it = FindNextPartitionBeginning ( packets_ . begin ( ) ) ; while ( it != packets_ . end ( ) )  const int partition_id = ( * it ) . codecSpecificHeader . codecHeader . VP8 . partitionId ; PacketIterator partition_end = FindPartitionEnd ( it ) ; fragmentation -> fragmentationOffset [ partition_id ] = ( * it ) . dataPtr - frame_buffer; fragmentation -> fragmentationLength [ partition_id ] = ( * partition_end ) . dataPtr + ( * partition_end ) . sizeBytes - ( * it ) . dataPtr; it = FindNextPartitionBeginning ( partition_end ); if ( partition_id + 1 > fragmentation -> fragmentationVectorSize )  fragmentation -> fragmentationVectorSize = partition_id + 1; if ( fragmentation -> fragmentationLength [ 0 ] == 0 )  fragmentation -> fragmentationOffset [ 0 ] = 0; for (int i = 1; i < fragmentation->fragmentationVectorSize; ++i) if ( fragmentation -> fragmentationLength [ i ] == 0 )  fragmentation -> fragmentationOffset [ i ] = fragmentation -> fragmentationOffset [ i - 1 ] + fragmentation -> fragmentationLength [ i - 1 ]; assert ( i == 0 || fragmentation -> fragmentationOffset [ i ] >= fragmentation -> fragmentationOffset [ i - 1 ] ); 
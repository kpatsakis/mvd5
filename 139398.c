static int ffs_set_inst_name(struct usb_function_instance *fi, const char *name) int name_len , ret ; name_len = strlen ( name ) + 1; if ( name_len > MAX_INST_NAME_LEN )  ptr = kstrndup ( name , name_len , GFP_KERNEL ); if ( ! ptr )  ret = _ffs_name_dev ( opts -> dev , ptr ); static int _ffs_name_dev(struct ffs_dev *dev, const char *name) existing = _ffs_do_find_dev ( name ); static struct ffs_dev *_ffs_do_find_dev(const char *name) if ( ! dev -> name || ! name )  if ( strcmp ( dev -> name , name ) == 0 )  if ( existing )  dev -> name = name; if ( ret )  kfree ( ptr ); return ret ; 
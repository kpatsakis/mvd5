void avpriv_color_frame(AVFrame *frame,const int c[4]) const AVPixFmtDescriptor * desc = av_pix_fmt_desc_get ( ( frame -> format ) ) ; int p ; int y ; for (p = 0; p < (desc -> nb_components); p++) uint8_t * dst = frame -> data [ p ] ; int is_chroma = p == 1 || p == 2 ; int bytes = - ( - frame -> width >> ( ( is_chroma ? ( desc -> log2_chroma_w ) : 0 ) ) ) ; for (y = 0; y < -(-frame -> height >> ((is_chroma?(desc -> log2_chroma_h) : 0))); y++) if ( desc -> comp [ 0 ] . depth_minus1 >= 8 )  ( ( uint16_t * ) dst ) [ x ] = c [ p ]; memset ( dst , c [ p ] , bytes ); dst += frame -> linesize [ p ]; 